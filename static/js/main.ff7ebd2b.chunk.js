(this.webpackJsonprevseek=this.webpackJsonprevseek||[]).push([[0],{19:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(18),l=a.n(s),i=a(2),c=a.n(i),o=a(3),u=a(4),m=a(5),d=a(7),p=a(6),h=a(8),f=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={term:""},a.extractJobId=function(e){return a.setState({term:e.split("?")[0]}),e.split("?")[0].replace(/[^0-9]/g,"")},a.onFormSubmit=function(e){e.preventDefault(),a.props.onSearchSubmit(a.extractJobId(a.state.term))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"SearchBar"},n.a.createElement("form",{action:"",onSubmit:this.onFormSubmit},n.a.createElement("div",null,n.a.createElement("input",{type:"text",placeholder:"Paste the URL for the job listing in here",value:this.state.term,onChange:function(t){return e.setState({term:t.target.value})}}),n.a.createElement("input",{type:"submit",value:"Calculate Salary Range"}))))}}]),t}(n.a.Component),v=function(){return n.a.createElement("div",{className:"lds-roller"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null))},y=function(e){var t=e.advertiserName,a=e.title,r=e.salaryMin,s=e.salaryMax,l=e.searchIsComplete,i=e.searchIsRunning;return r=(500*Math.round(r/500)).toLocaleString(),s=(500*Math.round(s/500)).toLocaleString(),n.a.createElement("div",{className:"JobDetails"},n.a.createElement("div",{className:"salary"},i&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"spinner"},n.a.createElement(v,null)),n.a.createElement("span",null,"Reticulating Splines... ")),l&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"lower"},"$",r)," -"," ",n.a.createElement("span",{className:"upper"},"$",s))),n.a.createElement("div",{className:"description"},n.a.createElement("span",{className:"title"},a),n.a.createElement("span",{className:"advertiserName"},t)))},b=(a(25),a(26).default),g=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={jobId:"",advertiserId:"",advertiserName:"",title:"",titleEncoded:"",teaser:"",lowerLimit:"",upperLimit:"",salaryVar:"",salaryMin:"",salaryMax:"",searchIsComplete:!1,searchIsRunning:!1},a.onSearchSubmit=function(){var e=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.resetSearch(),a.setState({searchIsRunning:!0,jobId:t}),e.next=4,a.getJobInfo(t).then((function(e){return a.setJobInfo(e)}));case 4:return e.next=6,a.findMaximum();case 6:return e.next=8,a.findMinimum();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.resetSearch=function(){console.log("resetSearch"),a.setState({advertiserId:"",advertiserName:"",title:"",teaser:"",lowerLimit:0,upperLimit:2e5,salaryVar:0,salaryMin:"",salaryMax:"",searchIsComplete:!1,searchIsRunning:!1},(function(){a.setState({salaryVar:a.state.lowerLimit+(a.state.upperLimit-a.state.lowerLimit)/2})}))},a.getJobInfo=function(e){return console.log("getJobInfo"),new Promise((function(t,a){t(b.get("http://localhost:3001/job-info/".concat(e)))}))},a.setJobInfo=function(e){console.log("setJobInfo");var t=e.data.data[0].advertiser.id,r=e.data.data[0].advertiser.description,n=e.data.data[0].title,s=encodeURI(e.data.data[0].title.replace(/[^a-zA-Z ]/g," ")),l=encodeURI(e.data.data[0].teaser.replace(/[^a-zA-Z ]/g," "));a.setState({advertiserId:t,advertiserName:r,title:n,titleEncoded:s,teaser:l})},a.findMaximum=Object(o.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("findMaximum"),t=0;case 2:if(!(t<15)){e.next=10;break}return e.next=5,b.get("http://localhost:3001/salary-range/".concat(a.state.advertiserId,"/").concat(Math.round(a.state.salaryVar),"/").concat(Math.round(a.state.upperLimit),"/").concat(a.state.titleEncoded,"%20").concat(a.state.teaser));case 5:(r=e.sent).data.totalCount>=1?a.setState({lowerLimit:a.state.salaryVar,salaryVar:a.state.salaryVar+(a.state.upperLimit-a.state.salaryVar)/2}):0===r.data.totalCount?a.setState({upperLimit:a.state.salaryVar,salaryVar:a.state.salaryVar-(a.state.salaryVar-a.state.lowerLimit)/2}):console.log("Multiple job listings found");case 7:t++,e.next=2;break;case 10:a.setState({salaryMax:a.state.salaryVar});case 11:case"end":return e.stop()}}),e)}))),a.findMinimum=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("findMinimum"),a.setState({lowerLimit:0,upperLimit:a.state.salaryMax,salaryVar:a.state.lowerLimit+(a.state.upperLimit-a.state.lowerLimit)/2},Object(o.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<10)){e.next=9;break}return e.next=4,b.get("http://localhost:3001/salary-range/".concat(a.state.advertiserId,"/").concat(Math.round(a.state.lowerLimit),"/").concat(Math.round(a.state.salaryVar),"/").concat(a.state.titleEncoded,"%20").concat(a.state.teaser));case 4:(r=e.sent).data.totalCount>=1?a.setState({upperLimit:a.state.salaryVar,salaryVar:a.state.salaryVar-(a.state.salaryVar-a.state.lowerLimit)/2}):0===r.data.totalCount?a.setState({lowerLimit:a.state.salaryVar,salaryVar:a.state.salaryVar+(a.state.upperLimit-a.state.salaryVar)/2}):console.log("Multiple job listings found");case 6:t++,e.next=1;break;case 9:a.setState({salaryMin:a.state.salaryVar,searchIsComplete:!0,searchIsRunning:!1});case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.resetSearch()}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("h1",null,"Seek Salary Calculator"),n.a.createElement(f,{onSearchSubmit:this.onSearchSubmit}),n.a.createElement(y,{advertiserName:this.state.advertiserName,title:this.state.title,salaryMin:this.state.salaryMin,salaryMax:this.state.salaryMax,searchIsComplete:this.state.searchIsComplete,searchIsRunning:this.state.searchIsRunning}))}}]),t}(n.a.Component);l.a.render(n.a.createElement(g,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.ff7ebd2b.chunk.js.map