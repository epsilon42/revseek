(this.webpackJsonprevseek=this.webpackJsonprevseek||[]).push([[0],{20:function(e,t,a){e.exports=a(47)},26:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(19),i=a.n(s),l=a(2),c=a.n(l),o=a(4),u=a(5),m=a(7),d=a(6),p=a(8),h=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={term:""},a.extractJobId=function(e){return a.setState({term:e.split("?")[0]}),e.split("?")[0].replace(/[^0-9]/g,"")},a.onFormSubmit=function(e){e.preventDefault(),a.props.onSearchSubmit(a.extractJobId(a.state.term))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"SearchBar"},n.a.createElement("form",{action:"",onSubmit:this.onFormSubmit},n.a.createElement("div",null,n.a.createElement("input",{type:"text",placeholder:"Paste the URL for the job listing in here",value:this.state.term,onChange:function(t){return e.setState({term:t.target.value})}}),n.a.createElement("input",{type:"submit",value:"Calculate Salary Range"}))))}}]),t}(n.a.Component),y=function(){return n.a.createElement("div",{className:"lds-roller"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null))},f=function(e){var t=e.advertiserName,a=e.title,r=e.salaryMin,s=e.salaryMax,i=e.searchIsComplete,l=e.searchIsRunning;return r=(500*Math.round(r/500)).toLocaleString(),s=(500*Math.round(s/500)).toLocaleString(),n.a.createElement("div",{className:"JobDetails"},n.a.createElement("div",{className:"salary"},l&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"spinner"},n.a.createElement(y,null)),n.a.createElement("span",null,"Reticulating Splines... ")),i&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"lower"},"$",r)," -"," ",n.a.createElement("span",{className:"upper"},"$",s))),n.a.createElement("div",{className:"description"},n.a.createElement("span",{className:"title"},a),n.a.createElement("span",{className:"advertiserName"},t)))},v=(a(26),a(27).default),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).state={jobId:"",advertiserId:"",advertiserName:"",title:"",titleEncoded:"",teaser:"",lowerLimit:"",upperLimit:"",salaryVar:"",salaryMin:"",salaryMax:"",searchIsComplete:!1,searchIsRunning:!1},a.onSearchSubmit=function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a.resetSearch(),a.setState({searchIsRunning:!0,jobId:e}),t.next=4,c.a.awrap(a.getJobInfo(e).then((function(e){return a.setJobInfo(e)})));case 4:return t.next=6,c.a.awrap(a.findMaximum());case 6:return t.next=8,c.a.awrap(a.findMinimum());case 8:case"end":return t.stop()}}))},a.resetSearch=function(){console.log("resetSearch"),a.setState({advertiserId:"",advertiserName:"",title:"",teaser:"",lowerLimit:0,upperLimit:2e5,salaryVar:0,salaryMin:"",salaryMax:"",searchIsComplete:!1,searchIsRunning:!1},(function(){a.setState({salaryVar:a.state.lowerLimit+(a.state.upperLimit-a.state.lowerLimit)/2})}))},a.getJobInfo=function(e){return console.log("getJobInfo"),new Promise((function(t,a){t(v.get("".concat("https://rocky-eyrie-95343.herokuapp.com","/job-info/").concat(e)))}))},a.setJobInfo=function(e){console.log("setJobInfo");var t=e.data.data[0].advertiser.id,r=e.data.data[0].advertiser.description,n=e.data.data[0].title,s=encodeURI(e.data.data[0].title.replace(/[^a-zA-Z ]/g," ")),i=encodeURI(e.data.data[0].teaser.replace(/ html /gi," ").replace(/ Html /gi," ").replace(/ HTML /gi," ").replace(/ not /gi," ").replace(/[^a-zA-Z ]/g," "));a.setState({advertiserId:t,advertiserName:r,title:n,titleEncoded:s,teaser:i})},a.findMaximum=function(){var e,t;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("findMaximum"),e=0;case 2:if(!(e<15)){r.next=10;break}return r.next=5,c.a.awrap(v.get("".concat("https://rocky-eyrie-95343.herokuapp.com","/salary-range/").concat(a.state.advertiserId,"/").concat(Math.round(a.state.salaryVar),"/").concat(Math.round(a.state.upperLimit),"/").concat(a.state.titleEncoded,"%20").concat(a.state.teaser)));case 5:(t=r.sent).data.totalCount>=1?a.setState({lowerLimit:a.state.salaryVar,salaryVar:a.state.salaryVar+(a.state.upperLimit-a.state.salaryVar)/2}):0===t.data.totalCount?a.setState({upperLimit:a.state.salaryVar,salaryVar:a.state.salaryVar-(a.state.salaryVar-a.state.lowerLimit)/2}):console.log("Multiple job listings found");case 7:e++,r.next=2;break;case 10:a.setState({salaryMax:a.state.salaryVar});case 11:case"end":return r.stop()}}))},a.findMinimum=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("findMinimum"),a.setState({lowerLimit:0,upperLimit:a.state.salaryMax,salaryVar:a.state.lowerLimit+(a.state.upperLimit-a.state.lowerLimit)/2},(function(){var e,t;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e=0;case 1:if(!(e<10)){r.next=9;break}return r.next=4,c.a.awrap(v.get("".concat("https://rocky-eyrie-95343.herokuapp.com","/salary-range/").concat(a.state.advertiserId,"/").concat(Math.round(a.state.lowerLimit),"/").concat(Math.round(a.state.salaryVar),"/").concat(a.state.titleEncoded,"%20").concat(a.state.teaser)));case 4:(t=r.sent).data.totalCount>=1?a.setState({upperLimit:a.state.salaryVar,salaryVar:a.state.salaryVar-(a.state.salaryVar-a.state.lowerLimit)/2}):0===t.data.totalCount?a.setState({lowerLimit:a.state.salaryVar,salaryVar:a.state.salaryVar+(a.state.upperLimit-a.state.salaryVar)/2}):console.log("Multiple job listings found");case 6:e++,r.next=1;break;case 9:a.setState({salaryMin:a.state.salaryVar,searchIsComplete:!0,searchIsRunning:!1});case 10:case"end":return r.stop()}}))}));case 2:case"end":return e.stop()}}))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.resetSearch()}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("h1",null,"Seek Salary Calculator"),n.a.createElement(h,{onSearchSubmit:this.onSearchSubmit}),n.a.createElement(f,{advertiserName:this.state.advertiserName,title:this.state.title,salaryMin:this.state.salaryMin,salaryMax:this.state.salaryMax,searchIsComplete:this.state.searchIsComplete,searchIsRunning:this.state.searchIsRunning}))}}]),t}(n.a.Component),b=a(9);b.a.initialize("UA-37683605-2"),b.a.pageview(window.location.pathname+window.location.search),i.a.render(n.a.createElement(g,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.572947e7.chunk.js.map